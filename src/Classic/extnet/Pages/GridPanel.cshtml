@page  "{handler?}"
@model Company.WebApplication.Pages.GridPanelModel
@using Company.WebApplication.Data
@{
    ViewData["Title"] = "GridPanel";
}
<ext-viewport layout="Border">
    <items>
        <ext-container
            region="North"
            cls="navbar"
            paddingAsString="0 20"
            height="64">
            <layout>
                <ext-hBoxLayout align="Middle" pack="Start" />
            </layout>
            <items>
                <ext-component
                    flex="1"
                    html=@("<a class=\"app-logo\" href=\"/\">Ext.NET App</a>")
                    />
                <ext-component flex="1" />
                <ext-component
                    html=@("<a class=\"link\" href=\"https://ext.net\" target=\"_blank\" rel=\"noopener\">Ext.NET Home</a>")
                    />
            </items>
        </ext-container>

        <ext-container
            region="West"
            cls="sidebar"
            width="240"
            scrollable="true"
            paddingAsString="20">
            <content>
                <nav class="sidebar-nav">
                    <ul>
                    @{
                        foreach(var item in NavData.Items)
                        {
                            var active = HttpContext.Request.Path == @item.Path ? " active" : "";
                            var cls = $"sidebar-nav-link{active}";

                            <li><a href="@item.Path" class="@(cls)"><i class="x-md">@item.IconCls</i><span>@item.Name</span></a></li>
                        }
                    }
                    </ul>
                </nav>
            </content>
        </ext-container>
        <ext-container
            region="Center"
            scrollable="true"
            paddingAsString="30 20 30 50">
            <items>
                <ext-gridPanel
                    title="GridPanel"
                    width="960"
                    height="640"
                    frame="true">
                    <store>
                        <ext-store data="Model.GridData">
                            <fields>
                                <ext-dataField name="company" />
                                <ext-numberDataField name="price" />
                                <ext-numberDataField name="change" />
                                <ext-numberDataField name="pctChange" />
                                <ext-dateDataField name="lastChange" dateFormat="M/d HH:mmtt" />
                            </fields>
                        </ext-store>
                    </store>
                    <columns>
                        <ext-column text="Company" dataIndex="company" flex="1" />
                        <ext-column text="Price" dataIndex="price" renderer="Ext.util.Format.usMoney" />
                        <ext-column text="Change" dataIndex="change" renderer="change" />
                        <ext-column text="Change %" dataIndex="pctChange" renderer="pctChange" />
                        <ext-dateColumn 
                            text="Last Updated" 
                            dataIndex="lastChange" 
                            width="150" 
                            format="yyyy-MM-dd" 
                            />
                    </columns>
                </ext-gridPanel>
            </items>
        </ext-container>
    </items>
</ext-viewport>
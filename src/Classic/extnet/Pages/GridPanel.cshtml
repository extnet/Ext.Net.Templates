@page  "{handler?}"
@model test.Pages.GridPanelModel
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ext.NET web application</title>

    <link rel="stylesheet" href="~/resources/css/main.css" />

    <script>
        var template = '<span style="color:{0};">{1}</span>';

        var change = function (value) {
            return Ext.String.format(template, (value > 0) ? "green" : "red", value);
        };
        
        var pctChange = function (value) {
            return Ext.String.format(template, (value > 0) ? "green" : "red", value + "%");
        };
    </script>
</head>
<body>
    <ext-viewport layout="Border">
        <items>
            <ext-container
                region="North"
                cls="navbar"
                paddingAsString="0 20"
                height="64">
                <layout>
                    <ext-hBoxLayout align="Middle" pack="Start" />
                </layout>
                <items>
                    <ext-component
                        flex="1"
                        html=@("<a class=\"app-logo\" href=\"/\">Ext.NET App</a>")
                        />
                    <ext-component flex="1" />
                    <ext-component
                        html=@("<a class=\"link\" href=\"https://ext.net\" target=\"_blank\" rel=\"noopener\">Ext.NET Home</a>")
                        />
                </items>
            </ext-container>

            <ext-container
                region="West"
                cls="sidebar"
                width="240"
                paddingAsString="20">
                <items>
                    <ext-button
                        cls="sidebar-menu-item"
                        ui="Light"
                        width="200"
                        text="Dashboard"
                        iconCls="x-md md-icon-dashboard"
                        textAlign="left"
                        onClientClick="window.location.href = '/'"
                        />
                    <ext-button
                        cls="sidebar-menu-item"
                        ui="Light"
                        width="200"
                        text="DirectEvents"
                        iconCls="x-md md-icon-flash-on"
                        textAlign="left"
                        onClientClick="window.location.href = '/directevents'"
                        />
                    <ext-button
                        cls="sidebar-menu-item active"
                        ui="Light"
                        width="200"
                        text="GridPanel"
                        iconCls="x-md md-icon-grid-on"
                        textAlign="left"
                        />
                </items>
            </ext-container>
            <ext-container
                region="Center"
                paddingAsString="30 20 30 50">
                <items>
                    <ext-gridPanel
                        title="GridPanel"
                        width="960"
                        height="640"
                        frame="true">
                        <store>
                            <ext-store data="Model.GridData">
                                <fields>
                                    <ext-dataField name="company" />
                                    <ext-numberDataField name="price" />
                                    <ext-numberDataField name="change" />
                                    <ext-numberDataField name="pctChange" />
                                    <ext-dateDataField name="lastChange" dateFormat="M/d HH:mmtt" />
                                </fields>
                            </ext-store>
                        </store>
                        <columns>
                            <ext-column text="Company" dataIndex="company" flex="1" />
                            <ext-column text="Price" dataIndex="price" renderer="Ext.util.Format.usMoney" />
                            <ext-column text="Change" dataIndex="change" renderer="change" />
                            <ext-column text="Change %" dataIndex="pctChange" renderer="pctChange" />
                            <ext-dateColumn 
                                text="Last Updated" 
                                dataIndex="lastChange" 
                                width="150" 
                                format="yyyy-MM-dd" 
                                />
                        </columns>
                        <bbar>
                            <ext-toolbar>
                                <items>
                                    <ext-button text="Print" iconCls="x-md md-icon-print" handler="this.up('grid').print();" />
                                </items>
                            </ext-toolbar>
                        </bbar>
                    </ext-gridPanel>
                </items>
            </ext-container>
        </items>
    </ext-viewport>
</body>
</html>
